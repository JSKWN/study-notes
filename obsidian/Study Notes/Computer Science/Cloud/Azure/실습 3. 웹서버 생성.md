‘실습1’에서 생성한 VM은 웹 서버 역할을 하기위한 HTTP 데몬 및 쇼핑몰 관련 웹페이지가 구성되지 않은 상태임. 운영 가능한 서버를 이번에 구현.

실습 1과 동일하게 구현하였으나, ‘고급’ 탭에서 cloud-init을 설정

## try1: 실패

![[image-43.png]]

![[image-44.png]]
1. **DB_HOST**: DBeaver의 **Host** 란에 적혀있던 주소.
    
2. **DB_USER**: DBeaver의 **Username** 란에 적혀있던 아이디.
    
3. **DB_PASSWD**: DBeaver 접속할 때 입력한 **비밀번호**
    
4. **DB_NAME**: DBeaver의 **Database** 란에 적혀있던 데이터베이스 이름.
![[image-47.png]]



![[image-49.png]]

![[image-48.png]]



![[image-50.png]]

설정 완료하면

연결 - 직렬콘솔

![[image-51.png]]

![[image-53.png]]
오류 발생함 → OOM인듯

Gemini 해결법 요청

>**원인: 메모리 부족 (Out of Memory)**
>로그 중간에 아주 결정적인 에러 메시지가 있습니다.
>
>  54.474736] Out of memory: Killed process 1893 (appstreamcli) ...
>
>그리고 가장 위쪽을 보면 현재 VM의 메모리가 보입니다.
>
>Memory: 339564K/471844K available
>
>**약 470MB (0.5GB)**의 메모리만 할당되어 있습니다.
>
>**상황 설명:**  
>Ubuntu 24.04가 부팅되면서 자동으로 패키지 업데이트(cloud-init 단계)를 시도했는데, **0.5GB 메모리로는 턱없이 부족해서** 시스템이 강제로 프로세스를 죽>이고(Kill) 부팅 마무리에 실패([FAILED] Failed to start cloud-final.service)한 것입니다.

---

> **해결 방법: VM 크기 변경 (Resize)**
>
현재 사용 중인 VM 사이즈(아마도 Standard_B1ls 같은 가장 싼 모델일 것입니다)를 **메모리 1GB 이상**인 모델로 변경해야 합니다.
>
>1. **Azure Portal** 접속 > 해당 VM (mall-vm2)으로 이동.
  >  
>2. 왼쪽 메뉴 중 **[크기 (Size)]**를 클릭합니다.
  >  
>3. 현재 선택된 것보다 메모리가 더 큰 모델을 선택합니다.
  >  
 >   - 최소: **Standard_B1s** (RAM 1GB) - 아슬아슬합니다.
>        
    - **권장:** **Standard_B2s** (RAM 4GB) 또는 **Standard_D2s_v3** 등. (실습용이라면 B2s 정도면 충분합니다.)
>        
>4. 하단의 **[크기 조정 (Resize)]** 버튼을 누릅니다. (VM이 재부팅됩니다.)
  >  
>5. 크기 변경이 완료되면 다시 접속을 시도해 보세요.
> 
>**요약:** 램(RAM)이 너무 작아서 켜지다가 숨이 막힌 상태입니다. 램을 늘려주시면 바로 해결됩니다.


왼쪽 탭에서 크기 조정 후 다시 시도

cmd에서 SSH 연결로 시도
![[image-54.png]]


# try2: 

- SSH 연결이 아닌, VM 생성 시 개요 탭에서 아이디-패스워드 연결 방식으로 설정함
- 우분투는 24.04LTS가 아닌, 22.04LTS로 변경
- 고급 탭의 cloud-init 부분에서, 비밀번호를 “<비밀번호>”처럼, 따옴표로 감싼 것이 문제가 된 듯
![[image-55.png]]

직렬 콘솔을 실행하면, cloud-init에서 설정했던 명령어들이 자동으로 실행된 것을 확인했고,
아이디 및 비밀번호 (mall-vm을 처음 설정할때, SSH 연결이 아닌 계정으로 생성할때 설정한 ID/PW)를 입력하면 접속완료

그 이후 개요 페이지의 공용 IP 주소로 HTTP 접속을 하면 다음과 같은 쇼핑몰을 확인할 수 있음
![[image-56.png]]